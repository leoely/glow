import { describe, expect, test, } from '@jest/globals';
import HighLight from '~/class/HighLight';
import YamlLexer from '~/class/YamlLexer';

describe('[class] YamlLexer', () => {
  test('YamlLexer parse result should be correct.', () => {
    const highLight = new HighLight();
    highLight.addLexer(YamlLexer);
    expect(JSON.stringify(highLight.parse(`
    " Minimum time interval which ignores a serails of same file update.
    interval: 5000(ms)

    " Stop add new task when current memory less than minimum memory.
    min-mem: 100(mb)

    " Increase or decrease core number which base recommended value.
    adjust-core: 0(core)

    " File or path which will ignores by file watch.
    ignores:
      - .drip/local/
      - .git/
      - .gitkeep

    " Alias and address of package which will be installed in this project.
    packages:
      - [node(]fsdfasd)

    " Level of instance index which affect both index time and index effect.
    index-level: 2(rank)
    `))).toMatch('[{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"Minimum\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"time\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"interval\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"ignores\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"a\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"serails\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"same\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"file\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"update.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"interval\"},{\"type\":\":\"},{\"type\":\" \"},{\"type\":\"(\"},{\"type\":\"unit\",\"elem\":\"ms\"},{\"type\":\")\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"Stop\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"add\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"new\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"task\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"when\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"current\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"memory\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"less\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"than\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"minimum\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"memory.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"min-mem\"},{\"type\":\":\"},{\"type\":\" \"},{\"type\":\"(\"},{\"type\":\"unit\",\"elem\":\"mb\"},{\"type\":\")\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"Increase\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"decrease\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"core\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"number\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"base\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"recommended\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"value.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"adjust-core\"},{\"type\":\":\"},{\"type\":\" \"},{\"type\":\"(\"},{\"type\":\"unit\",\"elem\":\"core\"},{\"type\":\")\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"File\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"or\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"path\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"will\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"ignores\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"by\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"file\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"watch.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"ignores\"},{\"type\":\":\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"-\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\".drip/local/\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"-\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\".git/\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"-\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\".gitkeep\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"Alias\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"and\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"address\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"package\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"will\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"be\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"installed\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"in\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"this\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"project.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"packages\"},{\"type\":\":\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"-\"},{\"type\":\" \"},{\"type\":\"value\",\"elem\":\"node(]fsdfasd)\"},{\"type\":\"\\n\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"\\\"\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"Level\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"of\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"instance\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"which\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"affect\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"both\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"time\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"and\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"index\"},{\"type\":\" \"},{\"type\":\"comment\",\"elem\":\"effect.\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\"key\",\"elem\":\"index-level\"},{\"type\":\":\"},{\"type\":\" \"},{\"type\":\"(\"},{\"type\":\"unit\",\"elem\":\"rank\"},{\"type\":\")\"},{\"type\":\"\\n\"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"},{\"type\":\" \"}]');
  });
});
